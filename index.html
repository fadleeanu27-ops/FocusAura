<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planner Fixed</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,700;1,800&family=IBM+Plex+Sans+Thai:wght@600&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        :root { --bg: #f5f5f7; --card: #ffffff; --text: #1d1d1f; --border: #e5e5e7; }
        body { background: var(--bg); color: var(--text); font-family: 'Plus Jakarta Sans', sans-serif; margin: 0; }
        
        .viewport { padding: 40px; display: flex; justify-content: center; }
        
        /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏£‡∏≠‡∏ö‡πÜ card */
        .planner-card { 
            background: var(--card); width: 100%; max-width: 750px; 
            padding: 80px 60px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏° padding ‡∏ö‡∏ô-‡∏•‡πà‡∏≤‡∏á */
            border-radius: 40px; position: relative;
        }

        /* ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ‡πÅ‡∏Å‡πâ‡πÇ‡∏î‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î (line-height) ‡πÅ‡∏•‡∏∞ padding */
        .name-field {
            font-family: 'Plus Jakarta Sans', sans-serif; 
            font-weight: 800; font-style: italic; font-size: 50px;
            letter-spacing: -2px; border: none; background: transparent; 
            color: var(--text); outline: none; width: 100%;
            
            line-height: 1.6 !important; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏°‡∏≤‡∏Å‡∏û‡∏≠ */
            padding-bottom: 20px !important; /* ‡∏î‡∏±‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏≠‡∏≠‡∏Å */
            display: block;
        }

        .header-section { margin-bottom: 50px; }
        .date-tag { font-weight: 700; color: #86868b; font-size: 14px; }
        
        /* Grid */
        .matrix { display: grid; gap: 8px; }
        .row { display: grid; grid-template-columns: 50px 1fr; gap: 20px; align-items: center; }
        .hour { font-size: 12px; font-weight: 700; color: #c5c5c7; }
        .slots { display: grid; grid-template-columns: repeat(6, 1fr); gap: 4px; }
        .slot { height: 32px; background: #fbfbfd; border: 1px solid var(--border); border-radius: 4px; cursor: pointer; }
        
        .btn-save { 
            position: fixed; bottom: 20px; right: 20px; 
            background: #000; color: #fff; border: none; 
            padding: 15px 30px; border-radius: 50px; font-weight: bold; cursor: pointer;
        }
        .hide { display: none !important; }
    </style>
</head>
<body>

    <div class="viewport">
        <div id="captureArea" class="planner-card">
            <div class="header-section">
                <input type="text" class="name-field" placeholder="FADLEEROMDON">
                <div class="date-tag">FEBRUARY 28, 2026</div>
            </div>

            <div id="gridBody" class="matrix"></div>
        </div>
    </div>

    <button onclick="saveImage()" class="btn-save">üì∏ DOWNLOAD IMAGE</button>

    <script>
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á
        const grid = document.getElementById('gridBody');
        for (let h = 4; h <= 23; h++) {
            const row = document.createElement('div');
            row.className = 'row';
            row.innerHTML = `<div class="hour">${h}H</div><div class="slots"></div>`;
            const slots = row.querySelector('.slots');
            for (let i = 0; i < 6; i++) {
                const s = document.createElement('div');
                s.className = 'slot';
                s.onclick = () => {
                    s.style.backgroundColor = s.style.backgroundColor ? '' : '#6366f1';
                    s.dataset.active = s.style.backgroundColor ? 'true' : 'false';
                };
                slots.appendChild(s);
            }
            grid.appendChild(row);
        }

        function saveImage() {
            const area = document.getElementById('captureArea');
            const rows = document.querySelectorAll('.row');
            
            // ‡∏ã‡πà‡∏≠‡∏ô‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á
            rows.forEach(r => {
                if (!r.querySelector('.slot[data-active="true"]')) r.classList.add('hide');
            });

            html2canvas(area, {
                scale: 3,
                backgroundColor: "#ffffff",
                useCORS: true,
                logging: false,
                // ‡∏à‡∏∏‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏ö‡∏†‡∏≤‡∏û‡πÉ‡∏´‡πâ‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Å‡∏ß‡πà‡∏≤‡∏ï‡∏±‡∏ß card ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢
                x: -10,
                y: -10,
                width: area.offsetWidth + 20,
                height: area.offsetHeight + 20
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'planner.png';
                link.href = canvas.toDataURL();
                link.click();
                rows.forEach(r => r.classList.remove('hide'));
            });
        }
    </script>
</body>
</html>
